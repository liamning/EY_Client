<div class="ng-view">

    <div class="wrapper wrapper-content animated fadeInRight" ng-controller="DocumentInquiryCtrl as ctrl">
        <form name="documentInquiryForm" class="form-horizontal clearfix" novalidate autocomplete="off" ng-model-options="{
                'updateOn': 'default blur',
                'debounce': { 'default': 0, 'blur': 0 }
              }">
            <div class="row">
                <div class="col-lg-11 clearfix">
                    <div class="ibox">

                        <div class="ibox-title">
                            <h5>档案搜寻</h5>

                        </div>


                        <div class="ibox-content">

                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="form-group" ng-class="{'has-error': votingProjectionForm.clientID.$invalid && votingProjectionForm.$submitted }">
                                        <label class="col-lg-4 control-label">客户编号</label>
                                        <div class="col-lg-8">

                                            <!-- <ui-select ng-model="documentInquiryObj.ClientID" theme="bootstrap" required name="clientID" ng-disabled="ctrl.disabled"
                                                on-select="clientIDChange()" reset-search-input="true" title="请选择客户编号">
                                                <ui-select-match placeholder="请输入客户编号">{{$select.selected}}</ui-select-match>
                                                <ui-select-choices repeat="clientid in ctrl.clientid" refresh="ctrl.refreshClientID($select.search)" refresh-delay="0">
                                                    <div ng-bind-html="clientid | highlight: $select.search"></div>
                                                </ui-select-choices>
                                            </ui-select> -->


                                            <ui-select ng-model="documentInquiryObj.ClientID" on-select="ui_select_change('ClientMaster'); " reset-search-input="true"
                                                title="请选择客户编号">
                                                <ui-select-match placeholder="请输入客户编号">{{$select.selected.Code}}</ui-select-match>
                                                <ui-select-choices repeat="item.Code as item in refresh_ui_select_list['ClientMaster'] track by $index" refresh="refresh_ui_select('ClientMaster', $select.search, 0, 1)"
                                                    refresh-delay="0">
                                                    <div>
                                                        <span ng-bind-html="item.Code | highlight: $select.search"></span>
                                                    </div>
                                                </ui-select-choices>
                                            </ui-select>


                                            <p class="help-block" ng-show="votingProjectionForm.clientID.$invalid && votingProjectionForm.$submitted">Client id required.</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label class="col-lg-4 control-label">债权人编号</label>
                                        <div class="col-lg-8">
                                            <!-- 

                                            <ui-select ng-model="documentInquiryObj.CreditorID" theme="bootstrap"  required name="creditorID"
                                                reset-search-input="true" title="请选择债权人编号">
                                                <ui-select-match placeholder="请输入债权人编号">{{$select.selected}}</ui-select-match>
                                                <ui-select-choices repeat="creditorid in ctrl.creditorids" refresh="ctrl.refreshCreditorID($select.search)" refresh-delay="0">
                                                    <div ng-bind-html="creditorid | highlight: $select.search"></div>
                                                </ui-select-choices>
                                            </ui-select> -->


                                            <ui-select ng-model="documentInquiryObj.CreditorID" on-select="ui_select_change('CreditorMaster'); " reset-search-input="true"
                                                title="请选择客户编号">
                                                <ui-select-match placeholder="请输入客户编号">{{$select.selected.Code}}</ui-select-match>
                                                <ui-select-choices repeat="item.Code as item in refresh_ui_select_list['CreditorMaster'] track by $index" refresh="refresh_ui_select('CreditorMaster', $select.search, 0, 1)"
                                                    refresh-delay="0">
                                                    <div>
                                                        <span ng-bind-html="item.Code | highlight: $select.search"></span>
                                                    </div>
                                                </ui-select-choices>
                                            </ui-select>


                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label class="col-lg-4 control-label">附件名称</label>
                                        <div class="col-lg-8">
                                            <input type="text" class="form-control" ng-model="documentInquiryObj.AttName" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label class="col-lg-4 control-label">附件类型</label>
                                        <div class="col-lg-8">


                                            <!-- <ui-select ng-model="documentInquiryObj.AttType" theme="bootstrap" reset-search-input="true" title="请选择附件类型">
                                                <ui-select-match placeholder="请选择附件类型">{{$select.selected.txt}}</ui-select-match>
                                                <ui-select-choices repeat="attType.val as attType in selection.AttType  | filter: $select.search">
                                                    <div style=" word-wrap:break-word;white-space: normal;" ng-bind-html="attType.txt | highlight: $select.search"></div>
                                                </ui-select-choices>
                                            </ui-select> -->

                                            <ui-select ng-model="documentInquiryObj.AttType" theme="bootstrap" reset-search-input="true" title="请选择附件类型">
                                                <ui-select-match placeholder="请选择附件类型">{{$select.selected.Desc}}</ui-select-match>
                                                <ui-select-choices repeat="item.Code as item in generalMaster('AttType')  | filter: $select.search">
                                                    <div>
                                                        <div ng-bind-html="item.Desc | highlight: $select.search"></div>
                                                    </div>
                                                </ui-select-choices>
                                            </ui-select>


                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label class="col-lg-4 control-label">附件备注</label>
                                        <div class="col-lg-8">
                                            <input type="text" class="form-control" ng-model="documentInquiryObj.AttRemark" />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <button class="btn btn-success" ng-click="search()">
                                <i class="fa fa-search"></i>&nbsp;&nbsp;搜索</button>
                            <a class="btn btn-danger" ng-click="reset()">
                                <i class="fa fa-refresh"></i>&nbsp;重置</a>

                        </div>
                    </div>

                    <div class="ibox">

                        <div class="ibox-content">

                            <div class="no-borders table-responsive">
                                <table class="table table-striped table-bordered">
                                    <tr>
                                        <th style="text-align: center">名称</th>
                                        <th style="text-align: center">类型</th>
                                        <th style="text-align: center">页数</th>
                                        <th style="text-align: center">备注</th>
                                        <th style="width: 60px;"></th>
                                    </tr>
                                    <tr ng-repeat="attachment in documentInquiryObj.DocumentInquiryList">
                                        <td style="vertical-align: middle">{{attachment.AttName}}</td>
                                        <td style="vertical-align: middle">{{attachment.AttType}}</td>
                                        <td align="right" style="vertical-align: middle">{{attachment.AttPage}}</td>
                                        <td style="vertical-align: middle">{{attachment.AttRemark}}</td>
                                        <td style="vertical-align: middle; text-align: center;">
                                            <a class="btn btn-success" href="/HttpHandler/ReportHandler.ashx?action=downloadDocumentByID&ID={{attachment.ID}}" target="_blank">
                                                <i class="fa fa-download"></i>
                                            </a>
                                        </td>
                                    </tr>
                                    <tr ng-show="documentInquiryObj.DocumentInquiryList.length == 0">
                                        <td colspan="5" style="text-align: center">{{GlobalSetting.NoRecordFound}}</td>
                                    </tr>
                                </table>
                            </div>

                        </div>
                    </div>

                </div>

            </div>
        </form>

    </div>




</div>